---
title: "Resultat från 2006 till 2019"
pagetitle: "Statistik"
author: Andrés
date: '2020-08-20'
weight: 10  # Order that this section will appear.
slug: statistik
categories: []
tags: []
subtitle: ''
summary: ''
authors: [admin]
lastmod: '2020-08-20T21:33:57+02:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

## Resultattabell för perioden från 2006 till 2019  

För den nostaligiske har jag lagt upp en lista över placeringar 1-3 i tidigare års KM-tävlingar. Jag har byggt vidare på de uppgifter som jag fått från Jan Tivenius som var tävlingsledare fram till och med 2018, varefter jag tog över.  

*Tack för hjälpen Janne!*  

```{r load_libraries, include=FALSE}
# Load libraries
library(tidyverse)
library(readr)
library(readxl)
library(DT)
library(kableExtra)
library(gt)
library(ggplot2)
library(here)
```


```{r prepare_data, include=FALSE}
# Load dataset
result_hist <- read_excel(here("assets", "data", "KM_tabeller.xlsx"))

## Prepare the data

# Create a long dataset
long_hist <- result_hist %>% 
  pivot_longer(c("1:a", "2:a", "3:a"), 
                     names_to = "place", values_to = "name")
# View(long_hist)

# Add new categorical variable result based on variable
long_hist$result <- factor(long_hist$place, ordered = TRUE,
                      levels = c("1:a", "2:a", "3:a"))

# Create dataframe with name, place and count of place
stat2 <- long_hist %>% 
  group_by(name) %>% 
  count(name, place, sort = TRUE)
# View(stat2)

# Separate name variable in stat2 df
stat2 <- stat2 %>% 
  separate(name, into = c("firstname", "lastname"))

```



```{r full_table, echo=FALSE}

gt(data = result_hist) %>% 
  tab_header(
    title = "Placeringar 1 till 3 i KM",
    subtitle = "Åren 2006 till 2019"
    ) %>% 
  cols_label(
    Year = "År"
  ) %>% 
    cols_align(
    align = "left",
    columns = vars(Year)
  ) %>% 
  tab_spanner(
    label = "Placering",
    columns = vars(
      "1:a", "2:a", "3:a")
  ) %>% 
  tab_source_note(
    source_note = md("*Källa: Jan Tivenius, Andrés Gomez.*")
  )

```

En tabell kan vara lite svår att smälta. För att dyrka upp innehållet har jag därför gjort lite cool analys av historiken så att ni kan se många segrar eller andra placeringar dom olika fäktarna har lyckats med.

### Antal pallplatser per fäktare  

Vi börjar analysen med att kolla på vilka fäktare som har placerat sig bland de 3 bästa och hur ofta det skett.


